{% load staticfiles %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>laprlsweb</title>
    <meta name="description" content="nlp"/>
    <meta name="generator" content="Themestr.app">
    <link rel="icon" href="{% static 'img/favicon.png' %}" type="image/x-icon"/>
    <link rel="shortcut icon" href="{% static 'img/favicon.png' %}" type="image/x-icon"/>
    <meta property="og:image" name="twitter:image" content="http://bootstrap.themes.guide/assets/ss_hootstrap.png">
    <meta name="twitter:description" content="Download Hootstrap - free, open source Bootstrap 4 theme by Themes.guide">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/3.0.0/css/ionicons.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link href="{% static 'css/theme.css' %}" rel="stylesheet">
    <link href="{% static 'css/template.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
    <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js"
            integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH"
            crossorigin="anonymous"></script>


</head>

<body data-spy="scroll" data-target="#navbar1" data-offset="60">
<header id='top' class="bg-primary">
    <div class="container h-100">
        <div class="row h-100">
            <div class="col-12">
                <!-- <div class="text-center m-0 vh-100 d-flex flex-column justify-content-center text-light">
                    <h1 class="display-4">Hootstrap</h1>
                    <p class="lead">It's a hootin, hollarin ho-down y'all!</p>
                </div> -->

                <div class="d-flex flex-column m-0 vh-100 home-section home-search justify-content-center align-items-center text-light">
                    <form class="home-search-form" action="" accept-charset="UTF-8" method="get">
                        {#                        <input name="utf8" type="hidden" value="✓">#}
                        <div class="search-title small-header">
                            <h4>What are you looking for?</h4>
                        </div>
                        <div class="form-group search-group"><input type="text" name="query" id="query"
                                                                    class="search-query" placeholder="d34002"
                                                                    autofocus="autofocus">
                            <div class="drugbank-icon icon-search-big">
                                <a href="#" id='toh' class="btn btn-light"
                                   style=" background-image: url('{% static 'img/search.png' %}'); border-radius: 50%; background-repeat: no-repeat; width: 48px; height: 48px;"></a>
                            </div>

                        </div>
                        <div id="clabel" class="form-group">
                            <label class="custom-radio"><input type="radio" name="searcher"
                                                               id="searcher_drugs" value="0"
                                                               class="custom-control-input searcher-category"
                                                               checked="checked">
                                <span class="custom-control-indicator btn btn-sm">
                                            <div class="searcher-icon margin-right icon-circle drugbank-icon icon-drugs"
                                                 style="background-image: url('{% static 'img/icons8-pills.png' %}'); border-radius: 50%; background-repeat: no-repeat; background-position: center; width: 32px; height: 32px; float: left;">
                                            </div>
                                            <span class="custom-control-description"
                                                  style="float: right; margin-left: 16px; margin-top:8px;"> <h6>Drugs</h6></span>
                                        </span>
                            </label>
                            <label class="custom-radio"><input type="radio" name="searcher" id="searcher_bio_entities"
                                                               value="1" class="custom-control-input searcher-category"><span
                                    class="custom-control-indicator btn btn-sm">
                                            <div class="searcher-icon margin-right icon-circle drugbank-icon icon-targets"
                                                 style="background-image: url('{% static 'img/icons8-define_location_filled.png' %}'); border-radius: 50%; background-repeat: no-repeat; background-position: center; width: 32px; height: 32px; float: left;">

                                            </div>
                                            <span class="custom-control-description"
                                                  style="float: right; margin-left: 10px; margin-top: 8px;"><h6>Targets</h6></span>
                                        </span>
                            </label>
                        </div>
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
    </div>
</header>
<nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary" id="navbar1">
    <div class="container">

        <a class="navbar-brand mx-auto mb-3 mt-0" href="#" style="letter-spacing: 2px;">
            <img src="{% static 'img/favicon.png' %}" alt="favicon" style="margin:0; margin-top: -2px;">
            基于多核学习的药物-标靶关联预测</a>
    </div>
</nav>
<main>
    <section id="tod" class="container pb-5">
        <div class="row">
            <div class="col-md-12">
                <div class="table-responsive">
                    <table class="table table-striped text-center table-hover table-list-break" id="dailyTable">
                        <thead>
                        <tr>
                            <th class="w-10">Index</th>
                            <th class="w-20" id="set_id">ID</th>
                            <th class="w-20">Score</th>
                            <th class="w-15">Kegg</th>
                            <th class="w-15">Drugbank</th>
                            <th class="w-15">Chembl</th>
                            <th class="w-15">Matador</th>
                        </tr>
                        </thead>
                    </table>
                </div>
            </div>
            <div class="w-100 my-4"></div>
            <div class="col-md-8">
                <a href="#top" class="text-primary" data-toggle="tooltip" data-placement="right"
                   title="This tooltip is on the right.">Return</a>
                <br>
                {#                <a href="#top" class="text-primary" data-toggle="tooltip" data-placement="bottom"#}
                {#                   title="This tooltip is on the bottom.">Bottom tooltip (hover)</a>#}
                {#                <br>#}
            </div>
            <div class="col-md-4 text-right">
                <!--
        <div class="px-4 p-2 rounded bg-primary text-light" data-toggle="popover" title="Popover title" data-content="And here's some amazing content. It's very engaging. Right?">
            Toggle my popover
        </div>-->
                <button type="button" class="btn btn-lg btn-primary" data-toggle="popover" title="Popover title">Again
                </button>
            </div>
            <div class="w-100 my-4"></div>

        </div>
    </section>
</main>
<footer id="footer" class="bg-dark text-light py-5">
    <div class="container py-5">
        <div class="row">
            <div class="col-6 col-md-6 col-lg-3 mb-2">
                <h6 class="text-uppercase">工具</h6>
                <!-- <ul class="nav flex-column">
                    <li><a class="text-white" target="ext" rel="nofollow" href="https://themestr.app" title="Bootstrap theme builder">Themestr.app</a></li>
                    <li><a class="text-white" target="ext" rel="nofollow" href="http://themes.guide" title="Bootstrap free and pro themes">Themes.guide</a></li>
                    <li><a class="text-white" target="ext" rel="nofollow" href="http://codeply.com" title="Prototype and edit code for Bootstrap and other responsive frameworks">Codeply</a>
                    </li>
                    <li><a class="text-white" target="ext" rel="nofollow" href="http://bootply.com">Bootply</a></li>
                </ul> -->
            </div>
            <div class="col-6 col-md-6 col-lg-3 mb-2 text-center">
                <h6 class="text-uppercase">学校</h6>
                <ul class="nav flex-column">

                </ul>
            </div>
            <div class="col-12 col-md-12 col-lg-6 mb-2 text-right">
                <h6 class="text-uppercase">声明</h6>
                <ul class="nav float-right">

                </ul>
            </div>
        </div>
        <!--/row-->
    </div>
</footer>
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
            <script src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/umd/popper.min.js"></script>
            <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script> -->

<script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/popper.js/1.13.0/umd/popper.min.js"></script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="/static/js/scripts.js"></script>

<!-- script method -->
<script type="text/javascript">

    ;$(document).ready(function () {
        $("#toh").click(function () {
            $("html, body").animate({
                scrollTop: $("#tod").offset().top
            }, {duration: 500, easing: "swing"});
            return false;
        });
    });        // 跳转表格


    ;$(document).ready(function () {
        var table = null;
        $('#toh').bind("click", function () {
            var id = $('#query').val();

            $.ajax({
                cache: false,
                type: 'GET',
                url: "{% url 'nlp:search_pairs' %}",
                data: {'id': id,},
                dataType: 'json',
                async: true,
                {#data: { csrf },#}
                success: function (data, status) {
                    //data = $.parseJSON(data['data']);

                    var data = eval(data['data']);

                    isChecked = $('input[type="radio"][name="searcher"]:checked').val();
                    console.log(typeof isChecked)
                    if (isChecked == '0') {
                        $('#set_id').text("Target ID");
                        table = $('#dailyTable').DataTable({
                            destroy: true,
                            processing: false,
                            serverSide: false,
                            searching: false,
                            scrollCollapse: true,
                            data: data,
                            {#显示行序号#}
                            order: [[2, 'desc']],
                            columns: [

                                    {#className: "td-no",#}
                                    {#orderable: false,#}
                                    {#data: null,#}
                                    {#render: function (data, type, row, meta) {#}
                                    {#    var no = meta.settings._iDisplayStart + meta.row + 1;#}
                                    {#    return no;#}
                                    {##}
                                    {##}
                                {"data": null},
                                {"data": "fields.target_id"},
                                {"data": "fields.score"},
                                {"data": "fields.kegg"},
                                {"data": "fields.drugbank"},
                                {"data": "fields.chembl"},
                                {"data": "fields.matador"},
                            ],

                            fixedColumns: true,
                            oLanguage: {
                                "sProcessing": "努力加载数据中.",
                                "sLengthMenu": "每页显示 _MENU_ 条记录",
                                "sZeroRecords": "抱歉， 没有找到",
                                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                                "sInfoEmpty": "没有数据",
                                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                                "sZeroRecords": "没有检索到数据",
                                "sSearch": "模糊查询:  ",
                                "oPaginate": {
                                    "sFirst": "首页",
                                    "sPrevious": "前一页",
                                    "sNext": "后一页",
                                    "sLast": "尾页"
                                }
                            },
                        });
                         table.on('order.dt search.dt', function () {
                            table.column(0, {
                                search: 'applied',
                                order: 'applied'
                            }).nodes().each(function (cell, i) {
                                cell.innerHTML = i + 1;
                            });
                        }).draw();
                    }

                    if (isChecked == '1') {
                        console.log(data)
                        $('#set_id').text("Drug ID");
                        table = $('#dailyTable').DataTable({
                            destroy: true,
                            processing: false,
                            serverSide: false,
                            searching: false,
                            scrollCollapse: true,
                            order: [[2, 'desc']],
                            data: data,
                            columns: [
                                {"data": null},
                                {"data": "fields.drug_id",},
                                {"data": "fields.score"},
                                {"data": "fields.kegg"},
                                {"data": "fields.drugbank"},
                                {"data": "fields.chembl"},
                                {"data": "fields.matador"},
                            ],
                            columnDefs: [{
                                "searchable": false,
                                "orderable": false,
                                "targets": 0
                            }],

                            fixedColumns: true,
                            oLanguage: {
                                "sProcessing": "努力加载数据中.",
                                "sLengthMenu": "每页显示 _MENU_ 条记录",
                                "sZeroRecords": "抱歉， 没有找到",
                                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                                "sInfoEmpty": "没有数据",
                                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                                "sZeroRecords": "没有检索到数据",
                                "sSearch": "模糊查询:  ",
                                "oPaginate": {
                                    "sFirst": "首页",
                                    "sPrevious": "前一页",
                                    "sNext": "后一页",
                                    "sLast": "尾页"
                                }
                            },
                        });
                        table.on('order.dt search.dt', function () {
                            table.column(0, {
                                search: 'applied',
                                order: 'applied'
                            }).nodes().each(function (cell, i) {
                                cell.innerHTML = i + 1;
                            });
                        }).draw();
                    }

                }
            });
        });
        {#隐藏列#}


    }, false);


</script>

</body>

</html>